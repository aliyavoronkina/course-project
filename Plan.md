# План автоматизации тестирования веб-сервиса покупки тура

## 1. Перечень автоматизируемых сценариев

### Позитивные сценарии:

**1.1. Успешная покупка тура по дебетовой карте**
- **Входные данные:** валидная одобренная карта (1111 2222 3333 4444), валидный месяц (текущий + 1), валидный год (текущий + 2), валидный владелец (латинские буквы), валидный CVC (3 цифры)
- **Ожидаемый результат:** уведомление об успешной операции, запись в БД в таблице `payment_entity` со статусом "APPROVED"

**1.2. Успешная покупка тура в кредит с одобренной картой**
- **Входные данные:** валидная одобренная карта (1111 2222 3333 4444), валидный месяц (текущий + 1), валидный год (текущий + 2), валидный владелец (латинские буквы), валидный CVC (3 цифры)
- **Ожидаемый результат:** уведомление об успешной операции, запись в БД в таблице `credit_request_entity` со статусом "APPROVED"

### Негативные сценарии (отклоненные операции):

**2.1. Покупка тура по дебетовой карте с отклоненной картой**
- **Входные данные:** отклоненная карта (5555 6666 7777 8888), валидные остальные данные
- **Ожидаемый результат:** уведомление об ошибке, запись в БД в таблице `payment_entity` со статусом "DECLINED"

**2.2. Покупка тура в кредит с отклоненной картой**
- **Входные данные:** отклоненная карта (5555 6666 7777 8888), валидные остальные данные
- **Ожидаемый результат:** уведомление об ошибке, запись в БД в таблице `credit_request_entity` со статусом "DECLINED"

### Негативные сценарии (валидация полей):

#### Поле "Номер карты":

**3.1. Пустой номер карты**
- **Входные данные:** пустое поле номера карты, валидные остальные данные
- **Ожидаемый результат:** сообщение об ошибке "Неверный формат" под полем номера карты

**3.2. Неполный номер карты (15 цифр)**
- **Входные данные:** номер карты из 15 цифр, валидные остальные данные
- **Ожидаемый результат:** сообщение об ошибке "Неверный формат" под полем номера карты

**3.3. Несуществующий номер карты**
- **Входные данные:** номер карты из 16 случайных цифр, не входящих в тестовые, валидные остальные данные
- **Ожидаемый результат:** уведомление об ошибке операции

#### Поле "Месяц":

**4.1. Пустой месяц**
- **Входные данные:** пустое поле месяца, валидные остальные данные
- **Ожидаемый результат:** сообщение об ошибке "Неверный формат" под полем месяца

**4.2. Месяц больше 12**
- **Входные данные:** месяц "13", валидные остальные данные
- **Ожидаемый результат:** сообщение об ошибке "Неверно указан срок действия карты" под полем месяца

**4.3. Месяц из одной цифры**
- **Входные данные:** месяц "5", валидные остальные данные
- **Ожидаемый результат:** сообщение об ошибке "Неверный формат" под полем месяца

**4.4. Прошедший месяц текущего года**
- **Входные данные:** предыдущий месяц от текущего, текущий год, валидные остальные данные
- **Ожидаемый результат:** сообщение об ошибке "Неверно указан срок действия карты" под полем месяца

#### Поле "Год":

**5.1. Пустой год**
- **Входные данные:** пустое поле года, валидные остальные данные
- **Ожидаемый результат:** сообщение об ошибке "Неверный формат" под полем года

**5.2. Прошедший год**
- **Входные данные:** предыдущий год от текущего, валидные остальные данные
- **Ожидаемый результат:** сообщение об ошибке "Истёк срок действия карты" под полем года

**5.3. Год более чем на 5 лет вперед от текущего**
- **Входные данные:** текущий год + 6 лет, валидные остальные данные
- **Ожидаемый результат:** сообщение об ошибке "Неверно указан срок действия карты" под полем года

#### Поле "Владелец":

**6.1. Пустой владелец**
- **Входные данные:** пустое поле владельца, валидные остальные данные
- **Ожидаемый результат:** сообщение об ошибке "Поле обязательно для заполнения" под полем владельца

**6.2. Владелец на кириллице**
- **Входные данные:** имя и фамилия на русском языке, валидные остальные данные
- **Ожидаемый результат:** сообщение об ошибке "Неверный формат" под полем владельца

**6.3. Владелец с цифрами**
- **Входные данные:** имя с цифрами, валидные остальные данные
- **Ожидаемый результат:** сообщение об ошибке "Неверный формат" под полем владельца

**6.4. Владелец со специальными символами**
- **Входные данные:** имя со специальными символами, валидные остальные данные
- **Ожидаемый результат:** сообщение об ошибке "Неверный формат" под полем владельца

#### Поле "CVC/CVV":

**7.1. Пустой CVC**
- **Входные данные:** пустое поле CVC, валидные остальные данные
- **Ожидаемый результат:** сообщение об ошибке "Неверный формат" под полем CVC

**7.2. CVC из двух цифр**
- **Входные данные:** CVC "12", валидные остальные данные
- **Ожидаемый результат:** сообщение об ошибке "Неверный формат" под полем CVC

**7.3. CVC из одной цифры**
- **Входные данные:** CVC "1", валидные остальные данные
- **Ожидаемый результат:** сообщение об ошибке "Неверный формат" под полем CVC

## 2. Используемые инструменты

- **Java 11** - язык программирования для написания автотестов
- **JUnit 5** - фреймворк для написания и запуска тестов
- **Selenide** - фреймворк для автоматизации веб-тестирования
- **Gradle** - система сборки проекта
- **Docker** - для контейнеризации СУБД (MySQL, PostgreSQL)
- **Docker Compose** - для оркестрации контейнеров
- **Allure Report** - для создания визуальных отчетов о тестировании
- **Java Faker** - для генерации тестовых данных
- **Lombok** - для уменьшения boilerplate кода
- **JDBC** - для взаимодействия с базами данных
- **MySQL Connector** - драйвер для работы с MySQL
- **PostgreSQL Driver** - драйвер для работы с PostgreSQL

## 3. Возможные риски при автоматизации

1. **Изменение UI-элементов** - частые изменения интерфейса могут привести к падению тестов
2. **Нестабильность банковского сервиса** - внешняя зависимость от симулятора банковских услуг
3. **Проблемы с настройкой окружения** - сложности с запуском и конфигурацией СУБД и приложения
4. **Различное поведение в разных браузерах** - необходимость кроссплатформенного тестирования
5. **Ограниченный доступ к логам банковского сервиса** - сложность отладки интеграционных проблем
6. **Отсутствие документации API** - необходимость реверс-инжиниринга для понимания взаимодействия

## 4. Интервальная оценка с учётом рисков

- **Планирование и настройка проекта**: 16 часов
- **Написание автотестов**: 40 часов
- **Интеграция с БД и отчетностью**: 12 часов
- **Отладка и доработка**: 16 часов
- **Подготовка документации**: 8 часов
- **Резерв на риски (25%)**: 23 часа
- **Итого**: 115 часов

## 5. План сдачи работ

- **Неделя 1**: Настройка окружения, планирование, создание базовой структуры проекта
- **Неделя 2**: Написание основных UI-тестов для форм оплаты
- **Неделя 3**: Интеграция с БД, написание SQL-запросов, настройка отчетности
- **Неделя 4**: Отладка тестов, подготовка отчетной документации, финальная проверка
- **Итоговая сдача**: через 4 недели от начала работы